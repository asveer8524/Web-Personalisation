<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<script type="text/javascript" src="/pub/TWiki/JQueryPlugin/jquery.js"></script>
<script type="text/javascript" src="/pub/TWiki/JQueryPlugin/jquery-migrate.js"></script>
<link rel="stylesheet" href="/pub/TWiki/JQueryPlugin/jquery-all.css" type="text/css" media="all" />
<script type="text/javascript" src="/pub/TWiki/JQueryPlugin/jquery-all.js"></script>
<title> Homework4 &lt; CS450fall09 &lt; TWiki</title>

<link rel="icon" href="https://www1.cs.uic.edu/images/favicon.ico" type="image/x-icon" />
<link rel="alternate" href="https://www.cs.uic.edu/bin/edit/CS450fall09/Homework4?_T=2018-11-25" type="application/x-wiki" title="edit Homework4" />
<link rel="shortcut icon" href="https://www1.cs.uic.edu/images/favicon.ico" type="image/x-icon" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/CS450fall09/WebRss" />
<base href="https://www.cs.uic.edu/bin/view/CS450fall09/Homework4"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/pub/TWiki/PatternSkin/pattern.js"></script>
<style type="text/css" media="all">
@import url('/pub/TWiki/TWikiTemplates/base.css');
</style>
<style type="text/css" media="all">
#patternTopBar,
#patternClearHeaderCenter,
#patternClearHeaderLeft,
#patternClearHeaderRight,
#patternTopBarContentsOuter,
#patternTopBarContents {
/*	height:64px; */ /* top bar height; make room for header columns */
	overflow:hidden;
}
#patternOuter {
	margin-left:14em;
}
#patternLeftBar {
	width:14em;
	margin-left:-14em;
}
</style>
<style type="text/css" media="all">
@import url('/pub/TWiki/PatternSkin/layout.css');
@import url('/pub/TWiki/PatternSkin/style.css');
@import url('/pub/TWiki/PatternSkin/colors.css');
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	.patternBookView .twikiTopRow,
	.patternWebIndicator a img,
	.patternWebIndicator a:hover img {
		background-color:#D0D0D0;
	}
	#patternTopBarContents { background-image:url(none); background-repeat:no-repeat;}
	
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/pub/TWiki/PreviewBackground/preview2bg.gif");*/
	}
	
</style><style type="text/css" media="all">

@import url('/pub/Main/WebPreferences/mainweb.css');

</style>
<style type="text/css" media="all">
	@import url("/pub/TWiki/PatternSkin/print.css");
</style>
<!--[if IE]><style type="text/css" media="screen">
pre {
	overflow-x:auto;
	padding-bottom:expression(this.scrollWidth > this.offsetWidth ? 16 : 0);
}
</style>
<![endif]-->
<!--[if lte IE 6]> 
<style type="text/css">
#patternLeftBar {
	position:relative; /* IE 5.5 needs this or the contents won't show outside the parent container on print. IE 6.0 needs it only during printable copy! */
}
</style><![endif]-->
<script type="text/javascript" src="/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script>

<!-- Google Analytics Snippet -->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17081517-1']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
	 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + 
'.google-analytics.com/ga.js';
	 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<!-- /Google Analytics Snippet -->
</head>
<body class="patternViewPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternWrapper"><div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain"><div id="patternClearHeaderCenter"></div>
<div id="patternMainContents"><div class="patternTop"><span class="patternHomePath twikiLeft"><a href="/bin/view/Main/WebHome" class="twikiLink">TWiki</a><span class='twikiSeparator'>&gt;</span><img src="/pub/TWiki/TWikiDocGraphics/web-bg-small.gif" border="0" alt="" width="13" height="13" style="background-color:#D0D0D0" />&nbsp;<a href="/bin/view/CS450fall09/WebHome">CS450fall09 Web</a><span class='twikiSeparator'>&gt;</span><a href="/bin/view/CS450fall09/Homeworks" class="twikiLink">Homeworks</a><span class='twikiSeparator'>&gt;</span><a href="https://www.cs.uic.edu/bin/view/CS450fall09/Homework4" title='Topic revision: 5 (2009-09-24 - 04:22:26)'>Homework4</a> <span class='patternRevInfo'>(2009-09-24, Main.jakob)</span></span><!-- /patternHomePath--><span class="patternToolBar twikiRight"><span><a href='https://www.cs.uic.edu/bin/edit/CS450fall09/Homework4?t=1543179317' rel='nofollow' title='Edit this topic text' accesskey='e'><span class='twikiAccessKey'>E</span>dit</a></span><span><a href='/bin/attach/CS450fall09/Homework4' rel='nofollow' title='Attach an image or document to this topic' accesskey='a'><span class='twikiAccessKey'>A</span>ttach</a></span></span><!-- /patternToolBar--><br class="twikiClear" /></div><!--/patternTop--><div class="twikiContentHeader"></div><div class="patternContent"><div class="patternTopic"> <h1><a name="Homework_4_due_Mon_Sept_28_at_2"></a> Homework 4 - due Mon Sept 28 at 2 pm </h1>
<p />
In this homework, we implement reliable communication over a highly unreliable link. The homework template is available at:
<p />
<pre>
svn://bits.cs.uic.edu/cs450f09/homeworks/hw4
</pre>
<p />
Your job is to change the template so that the following example execution always produces the correct result. In one terminal, you run the receiver in the following way, and it produces output as shown below.
<p />
<pre>
./hw4&#95;receiver 10080 &#62; RECEIVED&#95;FILE
UR: Minimum delay for this run is 274 ms
# later on, this happens...
File received, exiting.
</pre>
<p />
In a separate terminal, you run the sender:
<pre>
cat ORIGINAL&#95;FILE &#124; ./hw4&#95;sender 127.0.0.1 10080
UR: Minimum delay for this run is 634 ms
Sent 1020544 bytes in 25 seconds: 35 kB/s
Estimated RTT: 1029 ms
</pre>
<p />
For this homework, you can only have a single outstanding packet at any time. If you send a second packet before the first one arrives at the destination, the first packet will get 'clobbered', so it is important that you get your timeouts and your acknowledgments right.
<p />
A few things to pay attention to: <ul>
<li> unreliable.{h,c} - do not edit these files: your turned in homework will be graded with a different unreliable.c. You can only depend on what is declared in unreliable.h
</li> <li> hw4_sender.c, hw4_receiver.c - these are to be thought of as 'applications', using the 'library' you implement in hw4.c. You may change these files, but it is unlikely that you would want to put significant new code in these.
</li> <li> hw4.c - this is where the majority of your code should go. You will need to make major changes to rel_socket(), rel_send(), rel_receive() and rel_close().
</li> <li> ur_socket(), ur_send(), ur_sendto() and ur_recvfrom(). You must use these calls to create your sockets and to send your packets. No sendto(), recvfrom() or connect() calls anywhere except in unreliable.c
</li> <li> The file transferred: your program should work for any file, and reproduce it exactly. You can check this with the md5sum utility, or diff.
</li> <li> The RTT: you are to dynamically estimate the RTT using the EWMA technique, and use this to set your timeout period. With correctly tuned timeouts, lower RTT will result in higher throughput.
</li> <li> Keep your packets smaller than or equal to MAX_PACKET (1400 bytes).
</li></ul> 
<p />
Finally: <ul>
<li> Pay attention to the end of the connection. Ensure that both sides of the connection finish without user assistance, while guaranteeing that the entire file is transferred. Look at the FIN/FINACK/ACK sequence in TCP for ideas.
</li></ul> 
<h2><a name="HINTS"></a> HINTS </h2> <ul>
<li> For trying out your code, you can tune the packet loss ratios and round-trip latencies by changing LOSE_ONE_OUT_OF and MIN_DELAY_IN_MSEC in unreliable.c
</li> <li> Note that unreliable.c will be overwritten with a new version upon grading, so changes to these files are just for your own testing.
</li> <li> In rel_close(), you may want to just wait for some time, to make sure the last ack didn't get lost (leaving one end hanging).
</li> <li> ur_recv() is a blocking function, and making it non-blocking with SO_NONBLOCK or SO_RECVTIMEO options, or breaking it with alarm, is likely to give you trouble with the unreliability-abstraction (there is a delay imposed after receiving the packet). To safely implement a timeout, use select(), as follows:
</li></ul> 
<p />
<pre>

fd&#95;set readset;
FD&#95;ZERO(&#38;readset);
FD&#95;SET(sock,&#38;readset);

struct timeval t &#61; timeout; // select changes the timeout parameter on some platforms, so make a copy
int rdy &#61; select(FD&#95;SETSIZE,&#38;readset,0,0,&#38;t);
</pre>
if rdy == 1, your socket is ready for reading, if 0 it timed out.
<p />
<h2><a name="Turn_in_instructions"></a> Turn-in instructions </h2>
<p />
Same story as previous homeworks, except that your makefile should generate two binaries called hw4_ receiver and hw4_sender. </div><!-- /patternTopic-->
<div class="twikiContentFooter"></div></div><!-- /patternContent-->
<a name="topic-actions"></a><div class="patternTopicActions"><div class="patternTopicAction"><span class="patternActionButtons"><span><a href='https://www.cs.uic.edu/bin/edit/CS450fall09/Homework4?t=1543179317' rel='nofollow' title='Edit this topic text' accesskey='e'><span class='twikiAccessKey'>E</span>dit</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/attach/CS450fall09/Homework4' rel='nofollow' title='Attach an image or document to this topic' accesskey='a'><span class='twikiAccessKey'>A</span>ttach</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/view/CS450fall09/Homework4?cover=print' rel='nofollow' title='Printable version of this topic' accesskey='p'><span class='twikiAccessKey'>P</span>rint version</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><span><a href='/bin/rdiff/CS450fall09/Homework4?type=history' rel='nofollow' title='View total topic history' accesskey='h'><span class='twikiAccessKey'>H</span>istory</a></span>: r5&nbsp;<a rel="nofollow" href="/bin/rdiff/CS450fall09/Homework4?rev1=5;rev2=4">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/CS450fall09/Homework4?rev=4">r4</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/CS450fall09/Homework4?rev1=4;rev2=3">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/CS450fall09/Homework4?rev=3">r3</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/CS450fall09/Homework4?rev1=3;rev2=2">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/CS450fall09/Homework4?rev=2">r2</a>&nbsp;<a rel="nofollow" href="/bin/rdiff/CS450fall09/Homework4?rev1=2;rev2=1">&lt;</a>&nbsp;<a rel="nofollow" href="/bin/view/CS450fall09/Homework4?rev=1">r1</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/CS450fall09/Homework4?template=backlinksweb' rel='nofollow' title='Search the CS450fall09 Web for topics that link to here' accesskey='b'><span class='twikiAccessKey'>B</span>acklinks</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/view/CS450fall09/Homework4?raw=on' rel='nofollow' title='View raw text without formatting' accesskey='r'><span class='twikiAccessKey'>R</span>aw View</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='https://www.cs.uic.edu/bin/edit/CS450fall09/Homework4?t=1543179317;nowysiwyg=1' rel='nofollow' title='Raw Edit this topic text' accesskey='w'>Ra<span class='twikiAccessKey'>w</span> edit</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/CS450fall09/Homework4?template=oopsmore&amp;param1=5&amp;param2=5' rel='nofollow' title='Delete or rename this topic; set parent topic; view and compare revisions' accesskey='m'><span class='twikiAccessKey'>M</span>ore topic actions</a></span></span></div><!--/patternTopicAction--></div><!--/patternTopicActions--><div class="patternInfo twikiGrayText"><div class="patternRevInfo">Topic revision: r5 - 2009-09-24 - 04:22:26 - Main.jakob</div><!-- /patternRevInfo--><div class="patternMoved"></div><!-- /patternMoved--></div><!-- /patternInfo-->
</div><!-- /patternMainContents-->
</div><!-- /patternMain--><div id="patternLeftBar"><div id="patternClearHeaderLeft"></div>
<div id="patternLeftBarContents"><div class="patternWebIndicator"> <ul>
<li> <a href="/bin/view/CS450fall09/WebHome" class="twikiCurrentWebHomeLink twikiLink"><img src="/pub/TWiki/TWikiDocGraphics/web-bg-small.gif" width="13" height="13" alt="Web background" title="Web background" border="0" /> CS450fall09</a>
</li></ul> 
</div> <ul>
<li> <a href="/bin/view/CS450fall09/Syllabus" class="twikiLink">Syllabus</a>
</li> <li> <a href="/bin/view/CS450fall09/LectureNotes" class="twikiLink">Lecture Notes</a>
</li> <li> -<span style="color: #0000ff"> <a href="/bin/view/CS450fall09/References" class="twikiLink">References</a></span>
</li> <li> <a href="/bin/view/CS450fall09/Homeworks" class="twikiLink">Homeworks</a>
</li> <li> - <a href="/bin/view/CS450fall09/Subversion" class="twikiLink">Subversion</a>
</li> <li> - <a href="/bin/view/CS450fall09/VMWare" class="twikiLink">VMWare</a>
</li> <li> - <a href="/bin/view/CS450fall09/HomeworkSchedule" class="twikiLink">schedule</a>
</li> <li> - <a href="/bin/view/CS450fall09/HomeworkHints" class="twikiLink">hints</a>
</li> <li> <a href="http://listserv.uic.edu/htbin/wa?A0=CS450" target="_top">list archives</a>
</li> <li> <a href="/bin/view/CS450fall09/FrequentlyAskedQuestions" class="twikiLink">FAQ</a>
</li> <li> <a href="/bin/view/CS450fall09/ERF2054Map" class="twikiLink">ERF2054 map</a>
</li></ul> 
<p />
<a href="/bin/edit/CS450fall09.WebLeftBar" target="_top">[edit this</a>]
<hr />
<div class="patternLeftBarPersonal">
<ul><li class="patternLogIn"><a href="/bin/logon/CS450fall09/Homework4">Log In</a> </li></ul>
</div><!--/patternLeftBarPersonal-->
<p /> <ul>
<li> <strong><a href="/bin/view/CS450fall09/WebHome" class="twikiCurrentWebHomeLink twikiLink"> <img src="/pub/TWiki/TWikiDocGraphics/home.gif" width="16" height="16" alt="Home" title="Home" border="0" /> CS450fall09 Web</a></strong>
</li> <li> <a href="/bin/view/CS450fall09/WebCreateNewTopic?topicparent=Homework4" target="_top"> <img src="/pub/TWiki/TWikiDocGraphics/newtopic.gif" width="16" height="16" alt="New topic" title="New topic" border="0" /> Create New Topic</a>
</li> <li> <a href="/bin/view/CS450fall09/WebTopicList" class="twikiLink"> <img src="/pub/TWiki/TWikiDocGraphics/index.gif" width="16" height="16" alt="Index" title="Index" border="0" /> Index</a>
</li> <li> <a href="/bin/view/CS450fall09/WebSearch" class="twikiLink"> <img src="/pub/TWiki/TWikiDocGraphics/searchtopic.gif" width="16" height="16" alt="Search topic" title="Search topic" border="0" /> Search</a>
</li> <li> <a href="/bin/view/CS450fall09/WebChanges" class="twikiLink"> <img src="/pub/TWiki/TWikiDocGraphics/changes.gif" width="16" height="16" alt="Changes" title="Changes" border="0" /> Changes</a>
</li> <li> <a href="/bin/view/CS450fall09/WebNotify" class="twikiLink"> <img src="/pub/TWiki/TWikiDocGraphics/notify.gif" width="16" height="16" alt="Notify" title="Notify" border="0" /> Notifications</a>
</li> <li> <a href="/bin/view/CS450fall09/WebRss" class="twikiLink"> <img src="/pub/TWiki/TWikiDocGraphics/feed.gif" width="16" height="16" alt="RSS feed, rounded corners" title="RSS feed, rounded corners" border="0" /> RSS Feed</a>
</li> <li> <a href="/bin/view/CS450fall09/WebStatistics" class="twikiLink"> <img src="/pub/TWiki/TWikiDocGraphics/statistics.gif" width="16" height="16" alt="Statistics" title="Statistics" border="0" /> Statistics</a>
</li> <li> <a href="/bin/view/CS450fall09/WebPreferences" class="twikiLink"> <img src="/pub/TWiki/TWikiDocGraphics/wrench.gif" width="16" height="16" alt="Wrench, tools" title="Wrench, tools" border="0" /> Preferences</a>
</li></ul> 
<hr />
</div><!-- /patternLeftBarContents--></div><!-- /patternLeftBar-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--></div><!-- /patternWrapper--><div id="patternTopBar"><div id="patternTopBarContents"><div id="twikiLogo" class="twikiImage">
<map id="logomap" name="logomap">
	<area shape="rect" alt="" title="" coords="144,20,317,74" href="https://www.cs.uic.edu" target=""/>
	<area shape="rect" alt="College of Engineering" title="" coords="125,76,300,91" href="http://www.engineering.uic.edu/" target=""/>
	<area shape="rect" alt="University of Illinois at Chicago" title="" coords="10,20,120,71" href="http://www.uic.edu" target=""/>
</map>
<img src="https://www.cs.uic.edu/pub/cslogo_ds.png" alt="Home - this site is powered by TWiki(R)" border="0" style="border:none;" usemap="#logomap"/>
</div>
<p />
<div style="margin-left:650px; position:relative;">
	<form name="quickSearchForm" method="get" action="https://www.google.com/search">
		<input id=quickSearchBox type="text" class="twikiInputField" name="q" size="18" maxlength="255" value=""/>
		<input type="hidden" name="sitesearch" value="cs.uic.edu"/>
	</form>
</div>
<p />
<div id="menuContainer" style="overflow:visible; position:absolute; z-index:2; width:640px; left:342px; top:58px;">
<div id="navMenu">
<ul>
<li> <a href="#">ABOUT US</a>
	<ul>
	<li><a href="https://www.cs.uic.edu/Main/AboutCS">Our Department</a></li>
	<li><a href="https://www.cs.uic.edu/bin/view/Main/NewsArchive">Recent News</a></li>
	<li><a href="https://www.cs.uic.edu/bin/view/Main/Contact">Contact Us</a></li>
	</ul>
</li>
</ul>
<ul>
<li> <a href="#">ACADEMICS</a>
	<ul>
	<li><a href="/Main/ProspectiveStudents">Prospective Students</a></li>
	<li><a href="/Main/UndergraduatePrograms">Undergraduate</a></li>
	<li><a href="/Main/ComputerScienceMinor">CS Minor</a></li>       
	<li><a href="/Main/GraduatePrograms">Graduate</a></li>
	<li><a href="/Main/Courses">Courses</a></li>
	</ul>
</li>
</ul>
<ul>
<li> <a href="#">RESEARCH</a>
	<ul>
	<li><a href="/Main/Research">Overview</a></li>
	<li><a href="/Main/Faculty-Area">By Faculty</a></li>
	<li><a href="/Main/Research#Labs">Labs</a></li>
	</ul>
</li>
</ul>
<ul>
<li> <a href="#">PEOPLE</a>
	<ul>
	<li><a href="https://www.cs.uic.edu/faculty/">Faculty</a></li>
	<li><a href="https://www.cs.uic.edu/adjuncts/">Adjuncts</a></li>
	<li><a href="https://www.cs.uic.edu/staff">Staff</a></li>
	<li><a href="/Main/Students">Students</a></li>
	<li><a href="/Main/Alumni?y=2015">Alumni</a></li>
	</ul>
</li>
</ul>
<br class="clearFloat"/>
</div>
</div></div></div><!-- /patternTopBar--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="patternWebBottomBar"><table width="100%"><tr>
<td>Copyright 2016 The Board of Trustees<br/> of the University of Illinois.<a href="webmaster@cs.uic.edu">webmaster@cs.uic.edu</a></td>
<td><a href="https://wisest.uic.edu" target=_blank>WISEST<br />Helping Women Faculty Advance<br />Funded by NSF</a> </td><td>  <a href="http://engineering.uic.edu/bin/view/COE/CollegeGift" target="_top"><img alt="" src="https://www.cs.uic.edu/pub/Main/WebHome/gift.jpg" /></a> <a href="http://www1.cs.uic.edu/www/donate.php?audience=public" target="_top"> </a> </td><td> <a target="_blank" href="http://www.cs.uic.edu/CSOpenHouse"><img alt="" src="https://www.cs.uic.edu/pub/Main/WebHome/openHouseButton.gif" border="0" /></a> </td></tr></table></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />